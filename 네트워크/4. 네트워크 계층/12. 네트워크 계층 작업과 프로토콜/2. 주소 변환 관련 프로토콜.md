## 주소 변환의 팔요성
#### 주소 사용
- LAN -> MAC주소 사용
- 인터넷 -> IP주소 사용

결국 도착한 LAN안에서 호스트를 찾으려면 MAC주소 필요

### 해결 방안
#### 주소 변환 서버?
DNS의 형태처럼 주소 변환 서버로 문제를 해결하면 다양한 문제가 생김
- 패킷을 보낼때마다 주소 변환 서버를 거치기에 주소 변환 서버에 트래픽 몰림
- IP주소는 임의로 바꿀 수 있는 값이지만 주소 변환 서버는 IP주소가 변경되는 시점을 알기 어렵다.
- 주소 변환 서버가 고장나면 LAN전체의 통신이 불가능하다.
#### 방안
ARP, RARP, BOOTP, DHCP와 같은 프로토콜을 사용하여 해결한다.

## 주소 변환 프로토콜 ARP
#### ARP(Address Resolution Protocol)
IP주소로 MAC주소를 알아내는 프로토콜
1. IP가 담긴 ARP패킷을 LAN전체에 브로드캐스트한다.
2. ARP패킷을 받은 호스트들은 자신의 IP를 확인한다.
3. 만일 자신의 IP와 같을 경우 자신의 MAC주소를 반환한다.
4. 반환 받은 MAC주소를 캐시에 저장한다

### IP충돌 처리
새로운 호스트가 네트워크에 합류하거나 기존 호스트가 IP주소를 변경할 경우 IP주소가 충돌 할 수 있다.
#### 방법
1. 다음 상황과 같은 호스트는 IP를 사용하기전 ARP요청을 보냄
2. 만일 응답하는 호스트가 있을 경우 두 호스트 모두 IP충돌 메세지를 뛰움
3. IP의 선택권은 기존의 호스트가 가짐(다른 호스트들의 캐시에 기존의 호스트가 들어있음)

#### GARP(Gratuitous ARP)
만일 IP충돌이 일어나지 않을 경우 자신의 IP주소와 MAC주소를 보내는 ARP프로토콜 <br>
GARP를 받은 호스트는 해당 IP주소와 MAC주소를 자신의 캐시에 저장한다.
