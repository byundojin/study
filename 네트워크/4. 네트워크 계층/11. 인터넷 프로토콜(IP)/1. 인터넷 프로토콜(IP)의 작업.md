## 네트워크 계층과 이해
#### AS(Autonomous System)
독립적으로 데이터를 주고받는 네트워크

#### 네트워크의 계층작업
- 라우팅
- IP 주소 관리
- 도메인 이름 관리
- IP-MAC 주소 변환
- 네트워크 분할
- 이 기종 LAN 연결

#### IP가 해야 할 일
- 목적지까지 패킷 전송
- 혼잡 제어
- 서비스 요구사항
- 패킷 분리 처리
- IP 버젼 관리

### TCP/IP 관계
원래 계층은 서로 독립적이지만 TCP와 IP는 여러가지 이유로 협업함

## 서비스 요구사항
#### QoS(Quality of Services)
서비스 요구사항을 뜻하며, 네트워크를 사용하는 다양한 응용 프로그램들은 다양한 요구사항을 가진다.

#### 네트워크에게 요구되는 사양
- 신뢰성(reliability) - 패킷의 손상 없이 원본 데이터가 온전히 도착하는 것<br>
     -> 데이터의 정확성이 요구됨 - 신뢰성 높음
- 지연(delay) - 패킷을 보낸 후 얼마만큼의 시간이 걸려서 도착하는 것<br>
     -> 실시간으로 정보를 전달해야함 - 지연 높음
- 지터(jitter) - 패킷을 연달아 보낼 때 그 간격을 유지한 채로 도착하는 것<br>
     -> 정보 전달의 일정함이 중요함 - 지터 높음
- 대역폭(bandwidth) - 한꺼번에 보낼 수 있는 데이터의 양<br>
     -> 전달하는 데이터의 양이 많음 - 대역폭 높음

#### 현제
현제 인터넷 상에서 QoS는 모두 높음으로 표시하여 보낸다.

## 혼잡제어(congestion control)
#### 혼잡
특정 라우터에 패킷이 몰려 처리가 어려워지는 상황
#### 혼잡제어
혼잡이 발생한 곳의 흐름을 변화시켜 혼잡을 완화

#### 혼잡 발생 
1. 라우터는 버퍼에 패킷을 쌓아 놓고 순서대로 처리
2. 버퍼가 꽉차 수용할 수 없는 패킷은 버림
3. 버려진 패킷은 타임아웃되어 패킷이 재전송됨
4. 반복

#### 혼잡완화 방법
- 타임아웃 시간 늘리기 - 타임아웃 되는 패킷이 줄어 재전송이 줄어듬
- 슬라이딩 윈도우 크기 줄이기 - 보내는 데이터의 양이 줄어 라우터가 패킷을 처리하기 수월해짐
- 패킷 전송 간격 조정 - 패킷이 한번에 몰리지 않아 버리는 패킷의 양이 줄어듬

### 초크 패킷
윈도우의 크기를 줄일 때 사용되는 패킷

윈도우의 크기를 줄일려면 양쪽 모두 같이 줄여야 한다.<br>
이때 상대방에게 윈도우를 줄이자는 뜻으로 보내는 빈 패킷이 초크 패킷이다

윈도우의 크기를 줄여 혼잡을 제어하는 것은 TCP의 역할이다.

### 토큰 버킷 알고리즘
버퍼를 이용한 혼잡제어 알고리즘

보내는 쪽이 지터를 줄여 받는 쪽의 패킷 처리를 원활하게한다.

## 패킷 단편화
패킷을 쪼개어 전송하는 것

#### 필드
- ID Number - 패킷의 번호이며, ID Number가 같은 패킷은 모두 원본 패킷에서 분할된 패킷이다.
- Fragment Offset - 원본 패킷으로부터 어느정도 떨어진 위치에 있는 데이터인지 나타낸다.
 - More Fragment - 마지막 패킷인지 알려준다. <br>
 만일 0이면 뒤에 쪼개진 패킷이 더 있다는 것이고 <br>
 1이면 이 패킷이 쪼개진 패킷중 마지막이라는 것이다.

예시)<br>
원본 패킷<br>
23 ID 0 FO 1 MF 1 2 3 4 5 6 Data

2개로 쪼개진 패킷<br>
23 ID 3 FO 1 MF 3 4 5 Data<br> 
23 ID 0 FO 0 MF 1 2 3 Data

## 터널링(tunneling)
서로 다른 통신망을 사용하여 통신하는 법

예시)<br>
A통신망과 B통신망이 있을때를 기준으로 A호스트가 B통신망을 사용하여 통신하는 방법
1. A패킷을 B통신망이 사용하는 B패킷에 넣는다.
2. A통신망과 연결된 게이트 웨이로 B패킷을 보낸다.